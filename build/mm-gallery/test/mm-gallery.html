<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <script src="../bower_components/webcomponentsjs/webcomponents.js"></script>
    <script src="../bower_components/web-component-tester/browser.js"></script>
    <script src="TestHelper.js"></script>
    <script>
        var should = chai.should();


//        window.addEventListener('WebComponentsReady', function() {
//            var imgGallery = document.querySelector('#gallery');
//            var data = JSON.stringify(imgdata);
//            imgGallery.setAttribute('data', data);
//        });
    </script>
    <link rel="import" href="../build/strand.html">
</head>
<body>
<script>
    describe("mm-gallery", function() {

        it("should have an element constructor", function() {
            var element = new Strand.Gallery;
            element.nodeName.should.equal("MM-GALLERY");
        });

        it("should have data property", function() {
            var gallery = document.querySelector("#gallery");
            should.exist(gallery.data);
        });

        it("should render items when data is set", function(done) {
            var gallery = document.querySelector("#gallery");
            var imgdata = [{
                "id": "1",
                "thumb_src":  "../docs/images/thumbnails/img01.jpg",
                "img_src": "../docs/images/img01.jpg",
                "caption": "Image 1",
                "caption_position": "bottom"
            }, {
                "id": "2",
                "thumb_src": "../docs/images/thumbnails/img02.jpg",
                "img_src": "../docs/images/img02.jpg",
                "caption": "Image 2",
                "caption_position": "bottom"
            }, {
                "id": "3",
                "thumb_src": "../docs/images/thumbnails/img03.jpg",
                "img_src": "../docs/images/img03.jpg",
                "caption": "Image 3",
                "caption_position": "bottom"
            }, {
                "id": "4",
                "thumb_src": "../docs/images/thumbnails/img04.jpg",
                "img_src": "../docs/images/img04.jpg",
                "caption": "Image 4",
                "caption_position": "top"
            }, {
                "id": "5",
                "thumb_src": "../docs/images/thumbnails/img05.jpg",
                "img_src": "../docs/images/img05.jpg",
                "caption": "Image 5",
                "caption_position": "top"
            }, {
                "id": "6",
                "thumb_src": "../docs/images/thumbnails/img06.jpg",
                "img_src": "../docs/images/img06.jpg",
                "caption": "Image 6",
                "caption_position": "top"
            }, {
                "id": "7",
                "thumb_src": "../docs/images/thumbnails/img07.jpg",
                "img_src": "../docs/images/img07.jpg",
                "caption": "Image 7",
                "caption_position": "bottom"
            }, {
                "id": "8",
                "thumb_src": "../docs/images/thumbnails/img08.jpg",
                "img_src": "../docs/images/img08.jpg",
                "caption": "Image 8",
                "caption_position": "top"
            }, {
                "id": "9",
                "thumb_src": "../docs/images/thumbnails/img09.jpg",
                "img_src": "../docs/images/img09.jpg",
                "caption": "Image 9",
                "caption_position": "bottom"
            }, {
                "id": "10",
                "thumb_src": "../docs/images/thumbnails/img10.jpg",
                "img_src": "../docs/images/img10.jpg",
                "caption": "Image 10",
                "caption_position": "top"
            }, {
                "id": "11",
                "thumb_src": "../docs/images/thumbnails/img09.jpg",
                "img_src": "../docs/images/img09.jpg",
                "caption": "Image 11",
                "caption_position": "bottom"
            }, {
                "id": "12",
                "thumb_src": "../docs/images/thumbnails/img10.jpg",
                "img_src": "../docs/images/img10.jpg",
                "caption": "Image 12",
                "caption_position": "top"
            }, {
                "id": "13",
                "thumb_src": "../docs/images/thumbnails/img01.jpg",
                "img_src": "../docs/images/img01.jpg",
                "caption": "Image 13",
                "caption_position": "bottom"
            }, {
                "id": "14",
                "thumb_src": "../docs/images/thumbnails/img02.jpg",
                "img_src": "../docs/images/img02.jpg",
                "caption": "Image 14",
                "caption_position": "bottom"
            }];

            gallery._setData(imgdata);
            gallery.createDataObj(imgdata);

            flush(function(){
                var items = Polymer.dom(gallery.root).querySelectorAll(".img-slider img");
                items.length.should.be.greaterThan(0);
                done();
            });
        });

    });
</script>
<mm-gallery id="gallery">
    <div class="header"> Header </div>
    <div class="footer"> Footer </div>
</mm-gallery>

</body>
</html>